# Maintainer: Tristan Ross <spaceboyross@yandex.com>

_url="https://github.com/arch-openrc/opensysusers/archive"

pkgname=opensysusers
pkgver=0.4.8
pkgrel=1
pkgdesc="A standalone utility for handling systemd-style sysusers.d users and groups"
arch=('any')
url="https://github.com/artix-linux/opensysusers"
license=('custom:BSD2')
depends=('shadow')
groups=('base')
source=("$pkgname-$pkgver.tar.gz::https://github.com/artix-linux/opensysusers/archive/$pkgver.tar.gz"
  'opensysusers.hook'
  'sysusers-hook')
sha256sums=('4d1bf4657e8a2420d8dcf8da63f86809e3f023603a0940b86e4d10d0f42a0720'
  '5bc748068bb097a4c2b3a765ae683f0db40d70a6caf7ee363e9512dd54bbacc0'
  '5d592a7d5f8966f430960bcd08b3e3ad8db6cb406a7152f2976861472722d800')
       
build() {
  cd $pkgname-$pkgver
  make PREFIX="/usr" SYSTEMDCOMPAT=no HAVEOPENRC=no
}
            
package() {
	cd $pkgname-$pkgver
	make PREFIX="/usr" SYSTEMDCOMPAT=FALSE DESTDIR="$pkgdir" install
  rm -rf "$pkgdir"/etc/
	install -Dm644 "$srcdir"/opensysusers.hook "$pkgdir"/usr/share/libalpm/hooks/opensysusers.hook
	install -Dm644 LICENSE "$pkgdir"/usr/share/licenses/opensysusers/license
  install -D -m0755 "$srcdir/sysusers-hook" "$pkgdir"/usr/share/libalpm/scripts/sysusers-hook
}
